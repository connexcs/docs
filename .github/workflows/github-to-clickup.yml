name: GitHub to ClickUp Sync

on:
  issues:
    types: [opened, edited, closed]
  issue_comment:
    types: [created]

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
      - name: Create ClickUp task when issue is opened
        if: github.event.action == 'opened'
        run: |
          curl -X POST https://api.clickup.com/api/v2/list/${{ secrets.CLICKUP_LIST_ID }}/task \
          -H "Authorization: ${{ secrets.CLICKUP_API_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{
            "name": "'"${{ github.event.issue.title }}"'",
            "description": "'"${{ github.event.issue.body }}"'",
            "custom_fields": [
              {
                "name": "GitHub Issue ID",
                "value": "'"${{ github.event.issue.number }}"'"
              }
            ]
          }'
